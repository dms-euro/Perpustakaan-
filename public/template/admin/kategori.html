<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manajemen Buku & Kategori - Admin Panel</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- AOS -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <!-- Flowbite -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.2.1/flowbite.min.css" rel="stylesheet" />
    <!-- Box Icons -->
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <!-- SweetAlert2 -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>
<body class="bg-emerald-50 font-sans">

    <!-- Main Content -->
    <div class="lg:ml-64">
        <!-- Top Header -->
        <header class="bg-white shadow-sm border-b border-gray-200">
            <div class="flex items-center justify-between p-4">
                <div class="flex items-center space-x-4">
                    <button class="lg:hidden text-emerald-700" id="open-sidebar">
                        <i class='bx bx-menu text-2xl'></i>
                    </button>
                    <h1 class="text-2xl font-bold text-emerald-900">Manajemen Buku & Kategori</h1>
                </div>

                <div class="flex items-center space-x-4">
                    <button class="px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors font-medium flex items-center" id="add-book-btn">
                        <i class='bx bx-plus mr-2'></i>Tambah Buku
                    </button>
                </div>
            </div>
        </header>

        <!-- Main Content Area -->
        <main class="p-6">
            <!-- Section 1: Kiri - Tabel Kategori, Kanan - Form Tambah Buku -->
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6">
                <!-- Kiri: Tabel Kategori -->
                <div class="lg:col-span-1">
                    <div class="bg-white rounded-2xl shadow-sm p-6" data-aos="fade-right">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-lg font-bold text-emerald-900">Daftar Kategori</h3>
                            <button class="px-3 py-1 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors text-sm flex items-center" id="add-category-btn">
                                <i class='bx bx-plus mr-1'></i> Tambah
                            </button>
                        </div>

                        <div class="overflow-x-auto">
                            <table class="w-full">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Kategori</th>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Jumlah</th>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Aksi</th>
                                    </tr>
                                </thead>
                                <tbody class="bg-white divide-y divide-gray-200" id="categories-table-body">
                                    <!-- Categories will be dynamically added here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Kanan: Form Tambah Buku -->
                <div class="lg:col-span-2">
                    <div class="bg-white rounded-2xl shadow-sm p-6" data-aos="fade-left">
                        <h3 class="text-lg font-bold text-emerald-900 mb-4">Tambah Buku Baru</h3>
                        <form id="add-book-form" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Judul Buku *</label>
                                    <input type="text" name="book-title" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500" placeholder="Masukkan judul buku">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Penulis *</label>
                                    <input type="text" name="book-author" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500" placeholder="Nama penulis">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Kategori *</label>
                                    <select name="book-category" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500" id="category-select">
                                        <!-- Categories will be dynamically populated -->
                                    </select>
                                </div>
                            </div>

                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">ISBN</label>
                                    <input type="text" name="book-isbn" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500" placeholder="Nomor ISBN">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Lokasi Rak *</label>
                                    <input type="text" name="book-location" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500" placeholder="Contoh: Rak A-12">
                                </div>
                                <div class="flex items-end">
                                    <button type="submit" class="w-full px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors font-medium">
                                        <i class='bx bx-save mr-2'></i>Simpan Buku
                                    </button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <!-- Section 2: 2 Card di atas tabel buku -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                <!-- Card 1: Statistik Buku -->
                <div class="bg-white rounded-2xl shadow-sm p-6" data-aos="fade-up">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm text-gray-600">Total Buku</p>
                            <p class="text-3xl font-bold text-emerald-900" id="total-books">0</p>
                            <p class="text-sm text-emerald-600 flex items-center">
                                <i class='bx bx-book mr-1'></i>Dalam koleksi
                            </p>
                        </div>
                        <div class="w-12 h-12 bg-emerald-100 rounded-lg flex items-center justify-center">
                            <i class='bx bx-library text-2xl text-emerald-600'></i>
                        </div>
                    </div>
                </div>

                <!-- Card 2: Statistik Kategori -->
                <div class="bg-white rounded-2xl shadow-sm p-6" data-aos="fade-up" data-aos-delay="100">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm text-gray-600">Total Kategori</p>
                            <p class="text-3xl font-bold text-emerald-900" id="total-categories">0</p>
                            <p class="text-sm text-emerald-600 flex items-center">
                                <i class='bx bx-category mr-1'></i>Kategori aktif
                            </p>
                        </div>
                        <div class="w-12 h-12 bg-emerald-100 rounded-lg flex items-center justify-center">
                            <i class='bx bx-bookmark text-2xl text-emerald-600'></i>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Section 3: Tabel Buku dengan Search -->
            <div class="bg-white rounded-2xl shadow-sm overflow-hidden" data-aos="fade-up">
                <!-- Search and Filters -->
                <div class="px-6 py-4 border-b border-gray-200">
                    <div class="flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0">
                        <div class="flex-1">
                            <div class="relative max-w-md">
                                <input type="text" id="search-books" placeholder="Cari judul, penulis, atau ISBN..."
                                       class="w-full px-4 py-2 pl-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500">
                                <i class='bx bx-search absolute left-3 top-2.5 text-gray-400'></i>
                            </div>
                        </div>
                        <div class="flex items-center space-x-4">
                            <select id="category-filter" class="px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-emerald-500">
                                <option value="">Semua Kategori</option>
                                <!-- Categories will be dynamically populated -->
                            </select>
                            <select id="status-filter" class="px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-emerald-500">
                                <option value="">Semua Status</option>
                                <option value="Tersedia">Tersedia</option>
                                <option value="Dipinjam">Dipinjam</option>
                                <option value="Perbaikan">Perbaikan</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Table -->
                <div class="overflow-x-auto">
                    <table class="w-full">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Buku</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Penulis</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Kategori</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ISBN</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Lokasi</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Aksi</th>
                            </tr>
                        </thead>
                        <tbody class="bg-white divide-y divide-gray-200" id="books-table-body">
                            <!-- Books will be dynamically added here -->
                        </tbody>
                    </table>
                </div>

                <!-- Table Footer -->
                <div class="px-6 py-4 border-t border-gray-200 flex items-center justify-between">
                    <div class="text-sm text-gray-700">
                        Menampilkan <span class="font-medium" id="showing-count">0</span> dari <span class="font-medium" id="total-count">0</span> buku
                    </div>
                    <div class="flex items-center space-x-2">
                        <button class="px-3 py-1 border border-gray-300 rounded-lg text-sm hover:bg-gray-50 transition-colors" id="prev-page">
                            Sebelumnya
                        </button>
                        <button class="px-3 py-1 bg-emerald-600 text-white rounded-lg text-sm hover:bg-emerald-700 transition-colors" id="current-page">
                            1
                        </button>
                        <button class="px-3 py-1 border border-gray-300 rounded-lg text-sm hover:bg-gray-50 transition-colors" id="next-page">
                            Selanjutnya
                        </button>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Scripts -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.2.1/flowbite.min.js"></script>
    <script>
        // Initialize AOS
        AOS.init({
            duration: 800,
            once: true,
            offset: 100
        });

        // Sidebar functionality
        const sidebar = document.getElementById('sidebar');
        const openSidebar = document.getElementById('open-sidebar');
        const closeSidebar = document.getElementById('close-sidebar');

        openSidebar.addEventListener('click', () => {
            sidebar.classList.remove('-translate-x-full');
        });

        closeSidebar.addEventListener('click', () => {
            sidebar.classList.add('-translate-x-full');
        });

        // Logout functionality
        document.getElementById('logout-btn').addEventListener('click', () => {
            Swal.fire({
                title: 'Konfirmasi Logout',
                text: 'Apakah Anda yakin ingin keluar dari panel admin?',
                icon: 'question',
                showCancelButton: true,
                confirmButtonText: 'Ya, Logout',
                cancelButtonText: 'Batal',
                confirmButtonColor: '#10b981'
            }).then((result) => {
                if (result.isConfirmed) {
                    window.location.href = 'login.html';
                }
            });
        });

        // Data storage
        let categories = [
            { id: 1, name: 'Sains & Teknologi', bookCount: 1245 },
            { id: 2, name: 'Sastra', bookCount: 892 },
            { id: 3, name: 'Bisnis & Ekonomi', bookCount: 756 },
            { id: 4, name: 'Sejarah', bookCount: 634 },
            { id: 5, name: 'Filsafat', bookCount: 512 },
            { id: 6, name: 'Kesehatan', bookCount: 423 }
        ];

        let books = [
            { id: 1, title: 'Sustainable Future', author: 'Dr. Michael Green', category: 'Sains & Teknologi', isbn: '978-1234567890', status: 'Tersedia', location: 'Rak A-12' },
            { id: 2, title: 'Digital Transformation', author: 'Sarah Johnson', category: 'Bisnis & Ekonomi', isbn: '978-1234567891', status: 'Dipinjam', location: 'Rak B-05' },
            { id: 3, title: 'Mindful Living', author: 'Emma Wilson', category: 'Kesehatan', isbn: '978-1234567892', status: 'Tersedia', location: 'Rak C-08' },
            { id: 4, title: 'The Art of Programming', author: 'Robert Martin', category: 'Sains & Teknologi', isbn: '978-1234567893', status: 'Tersedia', location: 'Rak A-15' },
            { id: 5, title: 'Ancient Civilizations', author: 'Prof. David Lee', category: 'Sejarah', isbn: '978-1234567894', status: 'Perbaikan', location: 'Gudang' }
        ];

        // Initialize categories table
        function initializeCategoriesTable() {
            const tbody = document.getElementById('categories-table-body');
            const select = document.getElementById('category-select');
            const filterSelect = document.getElementById('category-filter');

            // Clear existing content
            tbody.innerHTML = '';
            select.innerHTML = '<option value="">Pilih Kategori</option>';
            filterSelect.innerHTML = '<option value="">Semua Kategori</option>';

            // Add categories to table and selects
            categories.forEach(category => {
                // Add to table
                tbody.innerHTML += `
                    <tr class="hover:bg-gray-50 transition-colors" data-category-id="${category.id}">
                        <td class="px-4 py-3 whitespace-nowrap">
                            <div class="text-sm font-medium text-emerald-900">${category.name}</div>
                        </td>
                        <td class="px-4 py-3 whitespace-nowrap">
                            <span class="px-2 py-1 bg-emerald-100 text-emerald-800 text-xs rounded-full">${category.bookCount} buku</span>
                        </td>
                        <td class="px-4 py-3 whitespace-nowrap text-sm font-medium">
                            <div class="flex items-center space-x-2">
                                <button class="text-emerald-600 hover:text-emerald-900 edit-category" data-id="${category.id}">
                                    <i class='bx bx-edit text-lg'></i>
                                </button>
                                <button class="text-red-600 hover:text-red-900 delete-category" data-id="${category.id}">
                                    <i class='bx bx-trash text-lg'></i>
                                </button>
                            </div>
                        </td>
                    </tr>
                `;

                // Add to select dropdowns
                select.innerHTML += `<option value="${category.id}">${category.name}</option>`;
                filterSelect.innerHTML += `<option value="${category.name}">${category.name}</option>`;
            });

            // Update category count
            document.getElementById('total-categories').textContent = categories.length;
        }

        // Initialize books table
        function initializeBooksTable() {
            const tbody = document.getElementById('books-table-body');
            tbody.innerHTML = '';

            books.forEach(book => {
                const statusColor = book.status === 'Tersedia' ? 'bg-green-100 text-green-800' :
                                 book.status === 'Dipinjam' ? 'bg-amber-100 text-amber-800' :
                                 'bg-red-100 text-red-800';

                tbody.innerHTML += `
                    <tr class="hover:bg-gray-50 transition-colors" data-book-id="${book.id}">
                        <td class="px-6 py-4 whitespace-nowrap">
                            <div class="flex items-center">
                                <div class="w-10 h-12 bg-emerald-100 rounded flex items-center justify-center mr-3">
                                    <i class='bx bx-book text-emerald-600'></i>
                                </div>
                                <div>
                                    <div class="text-sm font-medium text-emerald-900">${book.title}</div>
                                    <div class="text-xs text-gray-500">ID: BK-${book.id.toString().padStart(3, '0')}</div>
                                </div>
                            </div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <div class="text-sm text-gray-900">${book.author}</div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <span class="px-2 py-1 bg-emerald-100 text-emerald-800 text-xs rounded-full">${book.category}</span>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${book.isbn}</td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <span class="px-2 py-1 ${statusColor} text-xs rounded-full">${book.status}</span>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${book.location}</td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                            <div class="flex items-center space-x-2">
                                <button class="text-emerald-600 hover:text-emerald-900 edit-book" data-id="${book.id}">
                                    <i class='bx bx-edit text-lg'></i>
                                </button>
                                <button class="text-amber-600 hover:text-amber-900 view-book" data-id="${book.id}">
                                    <i class='bx bx-show text-lg'></i>
                                </button>
                                <button class="text-red-600 hover:text-red-900 delete-book" data-id="${book.id}">
                                    <i class='bx bx-trash text-lg'></i>
                                </button>
                            </div>
                        </td>
                    </tr>
                `;
            });

            // Update book counts
            document.getElementById('total-books').textContent = books.length;
            document.getElementById('showing-count').textContent = books.length;
            document.getElementById('total-count').textContent = books.length;
        }

        // Add Category Functionality
        document.getElementById('add-category-btn').addEventListener('click', function() {
            Swal.fire({
                title: 'Tambah Kategori Baru',
                html: `
                    <div class="text-left space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Nama Kategori *</label>
                            <input type="text" id="new-category-name" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500" placeholder="Nama kategori">
                        </div>
                    </div>
                `,
                showCancelButton: true,
                confirmButtonText: 'Simpan Kategori',
                cancelButtonText: 'Batal',
                confirmButtonColor: '#10b981',
                preConfirm: () => {
                    const name = document.getElementById('new-category-name').value;
                    if (!name) {
                        Swal.showValidationMessage('Nama kategori wajib diisi');
                        return false;
                    }

                    // Check if category already exists
                    if (categories.some(cat => cat.name.toLowerCase() === name.toLowerCase())) {
                        Swal.showValidationMessage('Kategori dengan nama tersebut sudah ada');
                        return false;
                    }

                    return { name: name };
                }
            }).then((result) => {
                if (result.isConfirmed) {
                    const newCategory = {
                        id: categories.length + 1,
                        name: result.value.name,
                        bookCount: 0
                    };

                    categories.push(newCategory);
                    initializeCategoriesTable();

                    Swal.fire('Berhasil!', `Kategori "${newCategory.name}" berhasil ditambahkan.`, 'success');
                }
            });
        });

        // Add Book Form
        document.getElementById('add-book-form').addEventListener('submit', function(e) {
            e.preventDefault();

            const formData = new FormData(this);
            const selectedCategory = categories.find(cat => cat.id == formData.get('book-category'));

            if (!selectedCategory) {
                Swal.fire('Error!', 'Harap pilih kategori.', 'error');
                return;
            }

            const newBook = {
                id: books.length + 1,
                title: formData.get('book-title'),
                author: formData.get('book-author'),
                category: selectedCategory.name,
                isbn: formData.get('book-isbn') || '-',
                status: 'Tersedia',
                location: formData.get('book-location')
            };

            if (!newBook.title || !newBook.author || !newBook.location) {
                Swal.fire('Error!', 'Harap isi semua field yang wajib.', 'error');
                return;
            }

            // Update book count in category
            selectedCategory.bookCount++;

            books.push(newBook);
            initializeBooksTable();
            initializeCategoriesTable(); // Refresh categories to update book counts
            this.reset();

            Swal.fire('Berhasil!', `Buku "${newBook.title}" berhasil ditambahkan.`, 'success');
        });

        // Delete Category
        document.addEventListener('click', function(e) {
            if (e.target.closest('.delete-category')) {
                const categoryId = parseInt(e.target.closest('.delete-category').getAttribute('data-id'));
                const category = categories.find(cat => cat.id === categoryId);

                if (category.bookCount > 0) {
                    Swal.fire({
                        title: 'Tidak Dapat Dihapus',
                        html: `Kategori <strong>"${category.name}"</strong> memiliki ${category.bookCount} buku. Pindahkan buku ke kategori lain terlebih dahulu.`,
                        icon: 'warning',
                        confirmButtonText: 'Mengerti',
                        confirmButtonColor: '#10b981'
                    });
                    return;
                }

                Swal.fire({
                    title: 'Hapus Kategori?',
                    html: `Anda akan menghapus kategori: <strong>"${category.name}"</strong>`,
                    icon: 'question',
                    showCancelButton: true,
                    confirmButtonText: 'Ya, Hapus!',
                    cancelButtonText: 'Batal',
                    confirmButtonColor: '#d33',
                    reverseButtons: true
                }).then((result) => {
                    if (result.isConfirmed) {
                        categories = categories.filter(cat => cat.id !== categoryId);
                        initializeCategoriesTable();
                        Swal.fire('Terhapus!', 'Kategori berhasil dihapus.', 'success');
                    }
                });
            }
        });

        // Delete Book
        document.addEventListener('click', function(e) {
            if (e.target.closest('.delete-book')) {
                const bookId = parseInt(e.target.closest('.delete-book').getAttribute('data-id'));
                const book = books.find(b => b.id === bookId);
                const category = categories.find(cat => cat.name === book.category);

                Swal.fire({
                    title: 'Hapus Buku?',
                    html: `Anda akan menghapus buku: <strong>"${book.title}"</strong> oleh ${book.author}`,
                    icon: 'warning',
                    showCancelButton: true,
                    confirmButtonText: 'Ya, Hapus!',
                    cancelButtonText: 'Batal',
                    confirmButtonColor: '#d33',
                    reverseButtons: true,
                    showLoaderOnConfirm: true,
                    preConfirm: () => {
                        return new Promise((resolve) => {
                            setTimeout(() => {
                                // Update category book count
                                if (category) {
                                    category.bookCount = Math.max(0, category.bookCount - 1);
                                }

                                // Remove book
                                books = books.filter(b => b.id !== bookId);
                                initializeBooksTable();
                                initializeCategoriesTable();
                                resolve();
                            }, 1000);
                        });
                    }
                }).then((result) => {
                    if (result.isConfirmed) {
                        Swal.fire('Terhapus!', 'Buku berhasil dihapus.', 'success');
                    }
                });
            }
        });

        // Search functionality
        document.getElementById('search-books').addEventListener('input', function(e) {
            const searchTerm = e.target.value.toLowerCase();
            const rows = document.querySelectorAll('#books-table-body tr');

            rows.forEach(row => {
                const text = row.textContent.toLowerCase();
                row.style.display = text.includes(searchTerm) ? '' : 'none';
            });

            // Update showing count
            const visibleRows = Array.from(rows).filter(row => row.style.display !== 'none');
            document.getElementById('showing-count').textContent = visibleRows.length;
        });

        // Filter by category
        document.getElementById('category-filter').addEventListener('change', function(e) {
            const selectedCategory = e.target.value;
            const rows = document.querySelectorAll('#books-table-body tr');

            rows.forEach(row => {
                const category = row.querySelector('td:nth-child(3)').textContent;
                if (!selectedCategory || category === selectedCategory) {
                    row.style.display = '';
                } else {
                    row.style.display = 'none';
                }
            });

            // Update showing count
            const visibleRows = Array.from(rows).filter(row => row.style.display !== 'none');
            document.getElementById('showing-count').textContent = visibleRows.length;
        });

        // Filter by status
        document.getElementById('status-filter').addEventListener('change', function(e) {
            const selectedStatus = e.target.value;
            const rows = document.querySelectorAll('#books-table-body tr');

            rows.forEach(row => {
                const status = row.querySelector('td:nth-child(5)').textContent;
                if (!selectedStatus || status === selectedStatus) {
                    row.style.display = '';
                } else {
                    row.style.display = 'none';
                }
            });

            // Update showing count
            const visibleRows = Array.from(rows).filter(row => row.style.display !== 'none');
            document.getElementById('showing-count').textContent = visibleRows.length;
        });

        // Add Book Button
        document.getElementById('add-book-btn').addEventListener('click', function() {
            document.getElementById('add-book-form').scrollIntoView({
                behavior: 'smooth',
                block: 'start'
            });
        });

        // Initialize the page
        initializeCategoriesTable();
        initializeBooksTable();
    </script>
</body>
</html>
