<!DOCTYPE html>
<html lang="id" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Dashboard Petugas | Perpustakaan Digital</title>

  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            sans: ['Inter', 'sans-serif'],
          },
        },
      },
    }
  </script>

  <!-- Boxicons -->
  <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>

  <!-- AOS -->
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- SweetAlert2 -->
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

  <!-- Inter Font -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body class="bg-gray-50 min-h-screen font-sans">

  <!-- Navbar -->
  <nav class="bg-emerald-600 text-white shadow-lg fixed top-0 left-0 right-0 z-50">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex items-center justify-between h-16">
        <div class="flex items-center space-x-3">
          <i class='bx bxs-book-open text-2xl'></i>
          <h1 class="text-xl font-bold">Perpustakaan Digital</h1>
        </div>
        <div class="flex items-center space-x-4">
          <span class="text-sm">Halo, Petugas!</span>
          <button onclick="logout()" class="bg-emerald-700 hover:bg-emerald-800 px-4 py-2 rounded-lg transition">
            <i class='bx bx-log-out'></i> Keluar
          </button>
        </div>
      </div>
    </div>
  </nav>

  <!-- Main Content -->
  <div class="pt-20 pb-10 px-4 sm:px-6 lg:px-8 max-w-7xl mx-auto">
    <header class="mb-10" data-aos="fade-down">
      <h2 class="text-3xl font-bold text-gray-800">Dashboard Petugas</h2>
      <p class="text-gray-600 mt-2">Ringkasan aktivitas perpustakaan hari ini</p>
    </header>

    <!-- Statistik Kartu -->
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-10">
      <div class="bg-white rounded-xl shadow-md p-6 hover:shadow-xl transition" data-aos="fade-up" data-aos-delay="100">
        <div class="flex items-center justify-between">
          <div>
            <p class="text-sm text-gray-600">Total Buku</p>
            <p class="text-3xl font-bold text-emerald-600">1,248</p>
          </div>
          <i class='bx bxs-book text-4xl text-emerald-500'></i>
        </div>
      </div>

      <div class="bg-white rounded-xl shadow-md p-6 hover:shadow-xl transition" data-aos="fade-up" data-aos-delay="200">
        <div class="flex items-center justify-between">
          <div>
            <p class="text-sm text-gray-600">Total Anggota</p>
            <p class="text-3xl font-bold text-emerald-600">892</p>
          </div>
          <i class='bx bxs-group text-4xl text-emerald-500'></i>
        </div>
      </div>

      <div class="bg-white rounded-xl shadow-md p-6 hover:shadow-xl transition" data-aos="fade-up" data-aos-delay="300">
        <div class="flex items-center justify-between">
          <div>
            <p class="text-sm text-gray-600">Sedang Dipinjam</p>
            <p class="text-3xl font-bold text-emerald-600">156</p>
          </div>
          <i class='bx bxs-book-reader text-4xl text-emerald-500'></i>
        </div>
      </div>

      <div class="bg-white rounded-xl shadow-md p-6 hover:shadow-xl transition" data-aos="fade-up" data-aos-delay="400">
        <div class="flex items-center justify-between">
          <div>
            <p class="text-sm text-gray-600">Terlambat</p>
            <p class="text-3xl font-bold text-red-600">12</p>
          </div>
          <i class='bx bxs-time text-4xl text-red-500'></i>
        </div>
      </div>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
      <!-- Grafik Peminjaman -->
      <div class="lg:col-span-2 bg-white rounded-xl shadow-md p-6" data-aos="fade-right">
        <h3 class="text-xl font-semibold text-gray-800 mb-4">Peminjaman per Bulan</h3>
        <canvas id="loanChart" height="100"></canvas>
      </div>

      <!-- Notifikasi & Aksi Cepat -->
      <div class="space-y-6">
        <!-- Notifikasi -->
        <div class="bg-white rounded-xl shadow-md p-6" data-aos="fade-left">
          <h3 class="text-xl font-semibold text-gray-800 mb-4 flex items-center">
            <i class='bx bxs-bell mr-2'></i> Notifikasi
          </h3>
          <ul class="space-y-3 text-sm">
            <li class="flex items-start space-x-2 text-yellow-700">
              <i class='bx bx-time-five'></i>
              <span>3 peminjaman baru menunggu persetujuan</span>
            </li>
            <li class="flex items-start space-x-2 text-red-700">
              <i class='bx bx-error-alt'></i>
              <span>12 buku melewati tanggal kembali</span>
            </li>
          </ul>
        </div>

        <!-- Aksi Cepat -->
        <div class="bg-white rounded-xl shadow-md p-6" data-aos="fade-left" data-aos-delay="200">
          <h3 class="text-xl font-semibold text-gray-800 mb-4">Aksi Cepat</h3>
          <div class="grid grid-cols-1 gap-3">
            <button onclick="addBook()" class="bg-emerald-600 hover:bg-emerald-700 text-white py-3 rounded-lg flex items-center justify-center space-x-2 transition">
              <i class='bx bx-plus'></i> <span>Tambah Buku</span>
            </button>
            <button onclick="addMember()" class="bg-emerald-600 hover:bg-emerald-700 text-white py-3 rounded-lg flex items-center justify-center space-x-2 transition">
              <i class='bx bx-user-plus'></i> <span>Tambah Anggota</span>
            </button>
            <button onclick="viewHistory()" class="bg-emerald-600 hover:bg-emerald-700 text-white py-3 rounded-lg flex items-center justify-center space-x-2 transition">
              <i class='bx bx-history'></i> <span>Riwayat Peminjaman</span>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal Detail Peminjaman -->
  <div id="detailModal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center z-50">
    <div class="bg-white rounded-xl shadow-2xl p-6 w-full max-w-md" data-aos="zoom-in">
      <div class="flex justify-between items-center mb-4">
        <h3 class="text-xl font-bold">Detail Peminjaman</h3>
        <button onclick="closeModal()" class="text-gray-500 hover:text-gray-700">
          <i class='bx bx-x text-2xl'></i>
        </button>
      </div>
      <div class="space-y-3 text-sm">
        <p><strong>Anggota:</strong> Budi Santoso</p>
        <p><strong>Buku:</strong> Algoritma dan Pemrograman</p>
        <p><strong>Tanggal Pinjam:</strong> 28 Okt 2025</p>
        <p><strong>Tanggal Kembali:</strong> 04 Nov 2025</p>
        <p><strong>Status:</strong> <span class="text-yellow-600">Menunggu Persetujuan</span></p>
      </div>
      <div class="mt-6 flex space-x-3">
        <button onclick="approveLoan()" class="flex-1 bg-emerald-600 hover:bg-emerald-700 text-white py-2 rounded-lg">Setujui</button>
        <button onclick="rejectLoan()" class="flex-1 bg-red-600 hover:bg-red-700 text-white py-2 rounded-lg">Tolak</button>
      </div>
    </div>
  </div>

  <!-- JavaScript -->
  <script>
    AOS.init({ once: true });

    // Chart.js - Peminjaman per Bulan
    const ctx = document.getElementById('loanChart').getContext('2d');
    new Chart(ctx, {
      type: 'line',
      data: {
        labels: ['Jan', 'Feb', 'Mar', 'Apr', 'Mei', 'Jun', 'Jul', 'Agu', 'Sep', 'Okt', 'Nov', 'Des'],
        datasets: [{
          label: 'Peminjaman',
          data: [65, 78, 92, 81, 106, 120, 135, 142, 128, 155, 170, 180],
          borderColor: '#10b981',
          backgroundColor: 'rgba(16, 185, 129, 0.1)',
          tension: 0.4,
          fill: true
        }]
      },
      options: {
        responsive: true,
        plugins: { legend: { display: false } },
        scales: { y: { beginAtZero: true } }
      }
    });

    // Fungsi Modal
    function openDetailModal() {
      document.getElementById('detailModal').classList.remove('hidden');
    }
    function closeModal() {
      document.getElementById('detailModal').classList.add('hidden');
    }

    // Simulasi Aksi
    function addBook() {
      Swal.fire({ icon: 'info', title: 'Fitur', text: 'Form tambah buku akan dibuka!' });
    }
    function addMember() {
      Swal.fire({ icon: 'info', title: 'Fitur', text: 'Form tambah anggota akan dibuka!' });
    }
    function viewHistory() {
      Swal.fire({ icon: 'info', title: 'Fitur', text: 'Riwayat peminjaman ditampilkan!' });
    }
    function approveLoan() {
      Swal.fire({ icon: 'success', title: 'Disetujui!', text: 'Peminjaman telah disetujui.' });
      closeModal();
    }
    function rejectLoan() {
      Swal.fire({ icon: 'error', title: 'Ditolak!', text: 'Peminjaman ditolak.' });
      closeModal();
    }
    function logout() {
      Swal.fire({
        icon: 'question',
        title: 'Keluar?',
        text: 'Anda akan kembali ke halaman login.',
        showCancelButton: true,
        confirmButtonText: 'Ya',
        cancelButtonText: 'Batal'
      }).then((result) => {
        if (result.isConfirmed) {
          window.location.href = '/index.html';
        }
      });
    }

    // Demo: Buka modal saat halaman load (untuk demo)
    setTimeout(openDetailModal, 2000);
  </script>
</body>
</html>
